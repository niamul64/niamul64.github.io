self.System=self.System||(()=>{const e={},t={},s=e=>e.replace(/^.\/(\w+)-[a-f0-9]{8,}.js$/,"./$1.js"),n={register(o,a){const r=s(`./${((document.currentScript||{}).src||"").split("?").shift().split("/").pop()}`),i={},c=a((e,t)=>t?i[e]=t:Object.assign(i,e),n);e[r]=Promise.all(o.map((e,t)=>n.import(s(e)).then(c.setters[t]))).then(()=>(c.execute(),i)).catch(e=>{throw e.message=`evaluating module ${r}: ${e.message}`,e}),t[r]&&(t[r](e[r]),delete t[r])},import:s=>e[s]||(e[s]=new Promise((e,n)=>{const o=setTimeout(()=>{n(new Error(`could not resolve ${s}`))},1e4);t[s]=t=>{clearTimeout(o),e(t)}}))};return n})(),System.register(["./frameworks.js"],(function(){"use strict";var e,t,s,n,o,a,r,i,c,l,u,d,m,p,f,g,j,h,b,y,L,w,v,k;return{setters:[function(E){e=E.c,t=E.q,s=E.o,n=E.x,o=E.e,a=E.v,r=E.d,i=E.y,c=E.ax,l=E.g,u=E.m,d=E.j,m=E.n,p=E.R,f=E.az,g=E.W,j=E.L,h=E.aY,b=E.bi,y=E.aK,L=E.K,w=E.k,v=E.a_,k=E.O}],execute:function(){function E(e,t){for(const s of document.querySelectorAll(".js-setting-toggle .js-status-indicator"))s.classList.remove("status-indicator-success","status-indicator-loading","status-indicator-failed");e.classList.add(t)}async function T(e){if(!e)return;const t=e.getAttribute("data-url");if(!t)return;let s;try{s=await m(document,t),e.innerHTML="",e.append(s)}catch(n){window.location.reload()}}function H(e,s){const n=t(s,".js-repo-access-error");n.textContent=e,n.classList.remove("d-none")}function M(){for(const e of document.querySelectorAll(".js-repo-access-error"))e.textContent="",e.classList.add("d-none")}function S(e){const s=e.querySelectorAll(".js-repo-access-entry").length;e.classList.toggle("is-empty",0===s);const n=e.querySelector(".js-collab-limit");if(n){const o=parseInt(n.getAttribute("data-collab-limit")||"",10),a=t(e,".js-over-limit",HTMLElement),r=t(e,".js-under-limit",HTMLElement);a.classList.toggle("d-none",s<o),r.classList.toggle("d-none",s>=o)}}async function q(e,s){M();const n=(await s.json()).json;let a;const r=d(e,".js-repo-access-group");a="collaborators"===r.id?r.querySelector(".js-repo-access-list-invites"):r.querySelector(".js-repo-access-list");const i=e.querySelector(".js-add-repo-access-field");if(i instanceof HTMLInputElement){const e=i.value;i.value="","teams"===r.id&&function(e){const t=document.querySelector(".js-repo-access-team-select");if(t){let s=0;for(const n of o(t,".js-repo-access-team-select-option"))e===n.getAttribute("data-team-id")&&(n.hidden=!0),n.hidden||s++;0===s&&d(t,".js-repo-access-group").classList.add("no-form")}}(e)}if(n.error)return n.error.requires_license?void p({content:f(document,n.html)}):void H(n.error,r);if(function(){const e=document.getElementById("collaborators");e&&(t(e,".js-add-new-collab",HTMLButtonElement).disabled=!0)}(),function(){const e=document.querySelector("#teams .js-add-new-collab");e instanceof HTMLButtonElement&&(e.disabled=!0)}(),A(),a){a.insertAdjacentHTML("beforeend",n.html);const e=o(a,".js-repo-access-entry");t(e[e.length-1],"a").focus()}if(S(r),n.seats||0===n.seats){const e=1===n.seats?"seat":"seats",t=document.getElementById("available-seats");t&&(t.innerHTML=`${n.seats} ${e}`)}}e(".js-email-global-unsubscribe-form",(function(e){t(e,".js-email-global-unsubscribe-submit",HTMLInputElement).disabled=!0})),s("change",".js-email-global-unsubscribe-form",(function(e){const s=e.currentTarget,n=t(s,".js-email-global-unsubscribe-submit",HTMLInputElement),a=o(s,".js-email-global-unsubscribe",HTMLInputElement),r=Array.from(a).some(e=>e.checked!==e.defaultChecked);n.disabled=!r})),n(".js-email-unsubscribe-form",(async function(e,t){await t.text();for(const s of document.querySelectorAll(".js-email-unsubscribe-message"))s instanceof HTMLElement&&(s.hidden=!s.hidden)})),a(".js-key-link-input",r((async function(e){const s=e.target;if(!(s instanceof HTMLInputElement))throw new Error("invariant: app/assets/modules/github/settings/key-links.js:33");const n=s.form;if(!(n instanceof HTMLFormElement))throw new Error("invariant: app/assets/modules/github/settings/key-links.js:35");const a=o(n,".js-key-link-input",HTMLInputElement),r=new FormData;for(const t of a)r.append(t.name,t.value);const l=t(n,".js-key-link-check",HTMLElement),u=function(e){const t=e.getAttribute("src");if(!t)return"";const s=document.createElement("a");return s.href=t,s.href}(l);if(!(l.parentElement instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/settings/key-links.js:45");const d=t(l.parentElement,".js-key-link-check-csrf",HTMLInputElement);try{const e=await i(c(u,d.value,{method:"POST",body:r}));l.innerHTML=e,l.hidden=!1}catch(m){l.hidden=!0}}),300)),n(".js-setting-toggle",(async function(e,s){const n=t(e,".js-status-indicator");E(n,"status-indicator-loading");try{await s.text(),E(n,"status-indicator-success")}catch(o){E(n,"status-indicator-failed")}})),s("change",".js-toggle-email-settings input",(function(){const e=t(document,".js-notification-emails"),s=document.querySelector(".js-toggle-email-settings input:checked");e.classList.toggle("d-none",!s)})),s("change",".js-toggle-ci-failures-only-setting input",(function(){const e=!!document.querySelector(".js-toggle-ci-failures-only-setting input:checked"),s=t(document,".js-ci-failures-only-settings input",HTMLInputElement),n=s.closest("label");n&&n.classList.toggle("text-gray-light",!e),e||(s.checked=!1),s.disabled=!e})),n(".js-revoke-access-form",(async function(e,s){await s.html();const n=l(e,"data-id"),o=l(e,"data-type-name"),a=t(document,`.js-revoke-item[data-type='${o}'][data-id='${n}']`);a.remove(),a.classList.contains("new-token")&&t(document,".js-flash-new-token").remove()})),s("click",".js-delete-oauth-application-image",(function(){const e=t(document,".js-delete-oauth-application-image-form",HTMLFormElement);u(e)})),s("click",".js-new-callback",(function(e){e.preventDefault();const s=e.currentTarget,n=d(s,".js-callback-urls"),o=t(n,".js-callback-url").cloneNode(!0);if(!(o instanceof HTMLElement))return;o.classList.remove("is-default-callback"),t(o,"input",HTMLInputElement).value="",n.classList.add("has-many");const a=s.parentNode;if(!(a instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/settings/oauth-apps.js:45");a.insertBefore(o,s)})),s("click",".js-delete-callback",(function(e){e.preventDefault();const t=e.currentTarget;d(t,".js-callback-url").remove();const s=d(t,".js-callback-urls");o(s,".js-callback-url",HTMLElement).length<=1&&s.classList.remove("has-many")})),s("click",".js-oauth-application-whitelist .js-deny-this-request",(function(e){const t=e.currentTarget,s=t.nextElementSibling;if(!(s instanceof HTMLInputElement))throw new Error("invariant: app/assets/modules/github/settings/oauth-apps.js:67");s.value="denied",u(d(t,".js-org-application-access-form",HTMLFormElement))})),s("click",".js-generate-integration-key",(function(){const e=t(document,".js-integration-key-management-wrapper");e.classList.add("downloading"),e.classList.contains("js-integration-key-multi")&&(e.classList.add("has-keys"),setTimeout((function(){const e=t(document,".js-integration-keys-container",HTMLElement);e&&T(e)}),1e3))})),n(".js-remove-integration-key",(async function(e,s){try{await s.text()}catch(a){if(!a.response)throw a;d(e,"details").removeAttribute("open");const s=t(document,".js-integration-key-management-wrapper"),n=t(s,".js-error-container"),o=t(n,".js-error-message");switch(a.response.status){case 500:o.textContent="Oops, something went wrong.";break;case 404:o.textContent="Oops, that key could not be found.";break;default:o.textContent=a.response.json.message}return void s.classList.add("error")}const n=l(e,"data-key-id"),o=document.getElementById(n);if(o){const e=d(o,".js-integration-keys-container",HTMLElement);e&&T(e)}})),s("click",".js-error-dismiss",(function(){const e=t(document,".js-integration-keys-container",HTMLElement);e&&T(e)})),s("change",".js-checkbox-scope",(function(e){const t=e.currentTarget;if(!(t instanceof HTMLInputElement))throw new Error("invariant: app/assets/modules/github/settings/oauth-apps.js:156");const s=d(t,".js-check-scope-container"),n=o(s,".js-checkbox-scope",HTMLInputElement);for(const o of n)o!==t&&(o.checked=t.checked,o.disabled=t.checked)})),s("change","[data-check-related-scopes]",(function(e){const t=e.currentTarget;if(!(t instanceof HTMLInputElement))throw new Error("invariant: app/assets/modules/github/settings/oauth-apps.js:172");const s=l(t,"data-check-related-scopes").split(" ");for(const n of s){const e=o(document,`[data-scope-for="${n}"] .js-checkbox-scope`,HTMLInputElement);for(const s of e)s.checked=t.checked,s.value!==n&&(s.disabled=t.checked)}}));const A=()=>{const e=document.querySelector(".js-repo-filled-seats"),t=document.querySelector(".js-repo-access-progress");if(!(e&&t instanceof HTMLElement))return;const s=e.getAttribute("data-filled-seats"),n=e.getAttribute("data-seats");if(!s||!n)return;const o=parseInt(s)+1,a=parseFloat(n);e.textContent=o.toString(),e.setAttribute("data-filled-seats",o.toString()),t.style.width=`${o/a*100}%`};function I(e){for(const t of e)t.hidden=!t.hidden}function x(e){for(const t of e){t.disabled=!1,d(t,".js-role-checkbox").classList.remove("text-gray-light")}}function $(e,t){e instanceof HTMLElement&&(e.hidden=t)}function C(e){const s=t(e,".js-authorized-pushers");if(!s.getAttribute("data-limit"))return;const n=parseInt(s.getAttribute("data-limit")||""),o=s.querySelectorAll(".js-authorized-user-or-team").length;s.classList.toggle("at-limit",o>=n)}async function F(e){const s=l(e,"data-actions-list-runners-url"),n=t(document,"#js-actions-runners-list");try{const e=await m(document,s);n.innerHTML="",n.append(e)}catch(o){window.location.reload()}}function z(){return t(document,".js-add-u2f-registration-form",HTMLFormElement)}s("details-menu-selected",".js-repo-access-team-select-menu",(function(e){if(!(e instanceof CustomEvent))throw new Error("invariant: app/assets/modules/github/settings/repository-collabs.js:199");const s=e.detail.relatedTarget,n=s.getAttribute("data-team-id")||"",o=t(d(s,".js-repo-access-group"),".js-add-repo-access-field",HTMLInputElement);if(o.value=n,!o.form)throw new Error("invariant: app/assets/modules/github/settings/repository-collabs.js:204");u(o.form)}),{capture:!0}),n(".js-add-repo-access-form-with-license",(async function(e,t){const s=document.querySelector('.js-add-repo-access-form[data-for="collaborators"]');s&&q(s,t)})),n(".js-add-repo-access-form",q),n(".js-remove-repo-access-form",(async function(e,t){if(e.hasAttribute("data-skip-remote"))return;try{await t.text()}catch(o){return void H(e.getAttribute("data-error-message")||"",d(e,".js-repo-access-group"))}M();const s=d(e,".js-repo-access-entry"),n=d(e,".js-repo-access-group");"teams"===n.id&&function(e){const t=document.querySelector(".js-repo-access-team-select");if(t){const s=t.querySelector(`[data-team-id='${e}']`);s instanceof HTMLElement&&(s.hidden=!1),d(t,".js-repo-access-group").classList.remove("no-form")}}(s.getAttribute("data-team-id")||""),s.remove(),S(n)})),s("combobox-commit",".js-repo-add-access-search",(function(e){if(!(e.target instanceof Element))return;const s=d(e.target,".js-repo-add-access-search"),n=d(e.target,".js-autocomplete-item");t(s,".js-selected-member-id").textContent=e.target.getAttribute("data-autocomplete-label")||"selection";const a=t(s,".js-selected-member-badge"),r=t(n,".js-selection-badge");a.innerHTML=r.innerHTML,I(o(s,".js-repo-add-access-search-selected, .js-repo-add-access-search-selection"));const i=s.querySelector(".js-base-role-badge");$(i,!0);const c=n.getAttribute("data-type"),l=n.hasAttribute("data-admin"),u=o(s,l?"[data-disable-org-admin]":"[data-disable-org-role]",HTMLInputElement);if(x(o(s,'input[name="role"]',HTMLInputElement)),"org-member"===c){$(i,!1);for(const e of u){e.disabled=!0,d(e,".js-role-checkbox").classList.add("text-gray-light")}}})),s("click",".js-cancel-selection",(function(e){if(!(e.target instanceof Element))return;const s=d(e.target,".js-repo-add-access-search");t(s,".js-repo-add-access-search-input",HTMLInputElement).value="",x(o(s,'input[name="role"]',HTMLInputElement)),I(o(s,".js-repo-add-access-search-selected, .js-repo-add-access-search-selection")),$(s.querySelector(".js-base-role-badge"),!0)})),s("details-dialog-close",".js-add-access-form",(function({currentTarget:e}){const s=t(e,".js-repo-add-access-search-input",HTMLInputElement);s.value="",x(o(s,'input[name="role"]',HTMLInputElement));const n=t(e,".js-repo-add-access-search-selection"),a=t(e,".js-repo-add-access-search-selected");a.hidden||(I([a,n]),$(s.querySelector(".js-base-role-badge"),!0))})),s("change","input.js-repo-data-opt-in",(function({currentTarget:e}){if(!(e instanceof HTMLInputElement))throw new Error("invariant: app/assets/modules/github/settings/repository-options.js:18");const t=d(e,".js-repo-data-services"),s=e.checked;for(const n of t.querySelectorAll(".js-repo-data-options"))n.classList.toggle("active",s);for(const n of t.querySelectorAll(".js-repo-data-option"))n.toggleAttribute("disabled",!s),s&&n.removeAttribute("checked")})),s("change",".js-repo-features-form input[type=checkbox]",(function({currentTarget:e}){const s=d(e,".js-repo-option"),n=t(s,".js-status-indicator");n.classList.remove("status-indicator-success","status-indicator-failed"),n.classList.add("status-indicator-loading")})),s("click",".js-used-by-selector-button",(function({currentTarget:e}){const s=d(e,".js-used-by-selector"),n=t(s,".js-status-indicator");n.classList.remove("status-indicator-success","status-indicator-failed"),n.classList.add("status-indicator-loading")})),n(".js-repo-features-form",(async function(e,s){let n;try{n=await s.html()}catch(a){for(const s of o(e,".status-indicator-loading")){s.classList.remove("status-indicator-loading"),s.classList.add("status-indicator-failed");const e=d(s,".js-repo-option"),n=t(e,"input[type=checkbox]",HTMLInputElement);n.checked=!n.checked}return}for(const t of o(e,".status-indicator-loading"))t.classList.remove("status-indicator-loading"),t.classList.add("status-indicator-success");t(document,".js-repo-nav").replaceWith(n.html)})),s("change",".js-repo-pages-visibility-form",(function({currentTarget:e}){const s=t(e,".js-status-indicator");s.classList.remove("status-indicator-success","status-indicator-failed"),s.classList.add("status-indicator-loading")})),n(".js-repo-pages-visibility-form",(async function(e,s){const n=t(e,".js-status-indicator");let o;try{o=await s.html()}catch(a){return n.classList.remove("status-indicator-loading"),n.classList.add("status-indicator-failed"),void e.reset()}n.classList.remove("status-indicator-loading"),n.classList.add("status-indicator-success"),t(document,".js-repo-nav").replaceWith(o.html)})),s("change",".js-merge-features-form input[type=checkbox]",(function({currentTarget:e}){if(!(e instanceof HTMLInputElement))throw new Error("invariant: app/assets/modules/github/settings/repository-options.js:96");const s=e.form;if(!s)throw new Error("invariant: app/assets/modules/github/settings/repository-options.js:99");for(const t of s.querySelectorAll(".errored"))t.classList.remove("errored");const n=d(e,".js-repo-option"),o=t(n,".js-status-indicator");o.classList.remove("status-indicator-success","status-indicator-failed"),o.classList.add("status-indicator-loading")})),n(".js-merge-features-form",(async function(e,s){try{await s.text()}catch(n){const s=n.response&&n.response.text.endsWith("(protected_branch_policy)")?".js-no-merge-commit-warning":".js-select-one-warning";for(const t of e.querySelectorAll(s))t instanceof HTMLElement&&(t.hidden=!1);for(const o of e.querySelectorAll(".status-indicator-loading")){o.classList.remove("status-indicator-loading"),o.classList.add("status-indicator-failed");const e=d(o,".js-repo-option");e.classList.add("errored");const s=t(e,"input[type=checkbox]",HTMLInputElement);s.checked=!s.checked}for(const t of e.querySelectorAll(".status-indicator-success"))t.classList.remove("status-indicator-success");return}for(const t of e.querySelectorAll(".errored"))t.classList.remove("errored");for(const t of e.querySelectorAll(".js-select-one-warning, .js-no-merge-commit-warning"))t instanceof HTMLElement&&(t.hidden=!0);for(const t of e.querySelectorAll(".status-indicator-loading"))t.classList.remove("status-indicator-loading"),t.classList.add("status-indicator-success")})),s("change","input.js-required-status-toggle",(function({currentTarget:e}){if(!(e instanceof HTMLInputElement))throw new Error("invariant: app/assets/modules/github/settings/repository-options.js:166");const s=d(e,".js-protected-branch-settings");t(s,".js-required-statuses").classList.toggle("d-none",!e.checked)})),s("change","input.js-required-status-checkbox",(function({currentTarget:e}){if(!(e instanceof HTMLInputElement))throw new Error("invariant: app/assets/modules/github/settings/repository-options.js:174");const s=d(e,".js-protected-branches-item");t(s,".js-required-status-badge").classList.toggle("d-none",!e.checked)})),s("change",".js-authorized-branch-pushers-toggle, input.js-authorized-review-dismisser-toggle",(function({currentTarget:e}){if(!(e instanceof HTMLInputElement))throw new Error("invariant: app/assets/modules/github/settings/repository-options.js:185");const s=d(e,".js-protected-branch-options"),n=t(s,".js-authorized-pushers");n.classList.toggle("d-none",!e.checked),t(n,".js-add-protected-branch-user-or-team input",HTMLInputElement).focus()})),s("change",".js-protected-branch-include-admin-toggle",(function({currentTarget:e}){const t=d(e,".js-protected-branch-settings").querySelectorAll(".js-protected-branch-admin-permission");for(const s of t)s.classList.toggle("d-none"),s.classList.toggle("active",!s.classList.contains("d-none"))})),s("auto-complete-change",".js-add-protected-branch-user-or-team",(async function({target:e}){if(!(e instanceof j))throw new Error("invariant: app/assets/modules/github/settings/repository-options.js:222");const s=e.value;if(!s)return;e.value="";const n=d(e,".js-protected-branch-options"),o=t(n,".js-authorized-users-and-teams"),a=o.querySelector(`div[data-user-or-team-name='${s}']`);if(a)return void t(a,".js-protected-branch-pusher").classList.add("user-already-added");const r=l(e,"data-add-url"),i=new URL(r,window.location.origin),c=new URLSearchParams(i.search.slice(1));c.append("item",s),i.search=c.toString(),o.append(await m(document,i.toString())),C(n)})),s("click",".js-remove-authorized-user-or-team",(function({currentTarget:e}){const t=d(e,".js-protected-branch-options");d(e,".js-authorized-user-or-team").remove(),C(t)})),e("#pages-cname-field",{constructor:HTMLInputElement,add(e){g(e,(function(){t(document,".js-pages-cname-save-btn",HTMLButtonElement).disabled=e.value===e.defaultValue}))}}),e(".js-pages-https-status-form",{constructor:HTMLFormElement,add(e){const t=new Request(e.action,{method:e.method,body:new FormData(e)});(async()=>{try{const s=await m(document,t);e.replaceWith(s)}catch(s){if(!s.response||404!==s.response.status)throw s}})()}}),s("change",".js-repo-actions-settings input[type=radio]",(function({currentTarget:e}){if(!(e instanceof HTMLInputElement))throw new Error("invariant: app/assets/modules/github/settings/repository-actions.js:10");const s=e.form;if(!s)throw new Error("invariant: app/assets/modules/github/settings/repository-actions.js:13");for(const t of s.querySelectorAll(".js-actions-status-indicator"))t.classList.remove("status-indicator-success","status-indicator-failed","status-indicator-loading");const n=d(e,".js-actions-option"),o=t(n,".js-actions-status-indicator");o.classList.remove("status-indicator-success","status-indicator-failed"),o.classList.add("status-indicator-loading")})),s("details-dialog-close",".js-repo-actions-add-runner-dialog",(function({currentTarget:e}){if(!(e instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/settings/repository-actions.js:27");F(e)})),s("details-dialog-close",".js-repo-actions-delete-runner-dialog",(function({currentTarget:e}){if(!(e instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/settings/repository-actions.js:33");F(e)})),s("details-menu-selected",".js-repo-actions-runners-choose-architecture-menu",(function(e){if(!(e instanceof CustomEvent))throw new Error("invariant: app/assets/modules/github/settings/repository-actions.js:62");const t=e.detail.relatedTarget;if(!(t instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/settings/repository-actions.js:65");const s=d(t,".js-action-runner-tabpanel"),n=l(t,"data-download-url"),a=l(t,"data-download-filename");for(const r of o(s,".js-action-runner-url"))r.textContent=n;for(const r of o(s,".js-action-runner-filename"))r.textContent=a}),{capture:!0}),n(".js-repo-restore",(async function(e,s){let n;const o=d(e,".js-deleted-repository");try{n=await s.html()}catch(a){throw a}n&&function(e,s){const n=t(e,".js-restore-status");n.innerHTML="",n.append(s.html)}(o,n)})),e(".js-restore-repo-job",(function(e){!function(e){t(e,"form>button",HTMLButtonElement).disabled=!0,t(e,"summary").classList.add("disabled");for(const t of e.querySelectorAll("details"))t.removeAttribute("open")}(d(e,".js-deleted-repository"))})),s("click",".js-disableable-summary.disabled",e=>e.preventDefault()),s("click",".js-repo-team-suggestions-view-all",(async function(e){const s=d(e.currentTarget,"ul"),n=l(e.currentTarget,"data-url"),a=o(document,".js-repo-toggle-team:checked",HTMLInputElement).map(e=>e.value),r=await m(document,n);s.innerHTML="",s.append(r);for(const o of a)t(s,`.js-repo-toggle-team[value="${o}"]`,HTMLInputElement).checked=!0})),a(".js-synced-repo-owner-input",(function(e){const t=e.target;if(!(t instanceof HTMLInputElement))throw new Error("invariant: app/assets/modules/github/settings/repository-settings.js:26");const s=t.getAttribute("data-sync");if(!s)return;const n=document.querySelectorAll(`[data-sync-with="${s}"]`);for(const o of n)o.textContent=t.value})),n(".js-saved-reply-delete",(async function(e,t){await t.text();const s=e.closest(".js-saved-reply-container");if(!s)throw new Error("invariant: app/assets/modules/github/settings/saved-replies.js:11");const n=s.querySelectorAll(".js-saved-reply-list-item").length;s.classList.toggle("has-replies",n>1);const o=e.closest(".js-saved-reply-list-item");if(!o)throw new Error("invariant: app/assets/modules/github/settings/saved-replies.js:17");o.remove()}));const B="data-webauthn-register-request";function O(e){e.webauthn_register_request&&z().setAttribute(B,JSON.stringify(e.webauthn_register_request))}function _(e,s){const n=t(document,".js-new-u2f-registration");n.classList.add("is-showing-error"),n.classList.remove("is-sending");for(const t of n.querySelectorAll(".js-u2f-message"))t.hidden=!0;const o=t(n,e);s&&(o.textContent=s),o.hidden=!1}async function D(e){if(!(await y("high")))throw new Error("sudo failed");const s=t(document,".js-add-u2f-registration-form",HTMLFormElement);L(s,"response").value=JSON.stringify(e);try{const e=await w(s.action,{method:s.method,body:new FormData(s),headers:{accept:"application/json"}}),n=await e.json();O(n),t(document,".js-new-u2f-registration").classList.remove("is-sending","is-active"),t(document,".js-u2f-registration-nickname-field",HTMLInputElement).value="";const o=n.registration;o&&t(document,".js-u2f-registrations").append(f(document,o))}catch(n){if(n.response){const e=await n.response.json();O(e),_(".js-u2f-server-error",e.error)}else _(".js-u2f-network-error")}}async function N(){try{!function(){const e=t(document,".js-new-u2f-registration");e.classList.add("is-sending"),e.classList.remove("is-showing-error")}();const e=JSON.parse(l(z(),B)),s=await b(e);await D(s)}catch(e){!function(e,t){_(t),v.report(e)}(new Error(e),".js-webauthn-registration-error")}}function W(){N()}function P(e,s){t(e,".js-add-new-blocked-user",HTMLButtonElement).disabled=!s}n(".js-u2f-registration-delete",(async function(e,t){const s=d(e,".js-u2f-registration");s.classList.add("is-sending"),O((await t.json()).json),s.remove()})),s("click",".js-add-u2f-registration-link",(function(){const e=t(document,".js-new-u2f-registration");e.classList.add("is-active"),e.classList.remove("is-showing-error"),t(document,".js-u2f-registration-nickname-field",HTMLInputElement).focus()})),s("click",".js-u2f-register-retry",(function(){W()})),s("submit",".js-add-u2f-registration-form",(function(e){e.preventDefault(),W()})),e(".js-u2f-box",(function(e){e.classList.toggle("available",h())})),e(".js-block-users-form",(function(e){P(e,!1)})),n(".js-block-users-form",(async function(e,s){const n=await s.html(),o=t(document,".js-user-block-settings-list"),a=t(o,".js-blocked-list"),r=t(o,".js-user-block-blank-slate");P(e,!1);const i=t(e,".js-add-blocked-user-field",HTMLInputElement);k(i,""),r.hidden=!0,a.hidden=!1,a.prepend(n.html)})),s("auto-complete-change",".js-add-blocked-user-completer",(function({target:e}){if(!(e instanceof j))throw new Error("invariant: app/assets/modules/github/settings/user-blocks.js:45");P(d(e,".js-block-users-form"),!!e.value)})),n(".js-user-sessions-revoke",(async function(e,t){await t.text();const s=d(e,".js-user-sessions-container");if(d(e,".js-user-session").remove(),s){const e=s.querySelectorAll(".js-user-session").length;s.classList.toggle("has-active-sessions",e>0)}})),n(".js-verify-ssh-key",(async function(e,s){await s.html();const n=d(e,"li");t(n,".js-unverified-user-key-notice").remove(),t(n,".js-user-key-icon").classList.remove("unverified-user-key"),e.remove()})),n(".js-leave-collaborated-repo",(async function(e,s){await s.html();const n=l(e,"data-repo-id"),o=l(e,"data-owner-id");t(document,`.js-collab-repo[data-repo-id='${n}']`).remove(),document.querySelector(".js-collab-repo")||(t(document,".js-collaborated-repos-empty").hidden=!1,t(document,".js-collaborated-repos").hidden=!0);const a=document.querySelector(`.js-collab-repo-owner[data-owner-id='${o}']`);a&&(a.querySelector(".js-collab-repo")||a.remove())})),s("change",".js-notification-restrictions-confirmation-needed",(function({currentTarget:e}){if(!(e instanceof HTMLInputElement))throw new Error("invariant: app/assets/modules/github/settings/verified-domains.js:12");t(document,".js-notification-restrictions-confirm-modal").classList.toggle("d-none",!e.checked),t(document,".js-notification-restrictions-save").classList.toggle("d-none",e.checked)}))}}}));
//# sourceMappingURL=settings-bootstrap-f99d290b.js.map
